import{d as k,b as P,g as at,c as D,e as ke,_ as Et,a as wt,k as Lt}from"./@babel-CyN6Efhd.js";import{c as Le}from"./classnames-satyqWY2.js";import{R as it}from"./rc-resize-observer-BMteYGkJ.js";import{q as A,L as _t,u as Se,i as Ze}from"./rc-util-DDDTlteG.js";import{r as t}from"./react-CWdn-sfl.js";import{r as Je}from"./react-dom-DX1M9HrU.js";var ut=t.forwardRef(function(e,h){var s=e.height,c=e.offsetY,f=e.offsetX,v=e.children,l=e.prefixCls,u=e.onInnerResize,M=e.innerProps,d=e.rtl,g=e.extra,n={},S={display:"flex",flexDirection:"column"};return c!==void 0&&(n={height:s,position:"relative",overflow:"hidden"},S=k(k({},S),{},P(P(P(P(P({transform:"translateY(".concat(c,"px)")},d?"marginRight":"marginLeft",-f),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(it,{onResize:function(R){var i=R.offsetHeight;i&&u&&u()}},t.createElement("div",at({style:S,className:Le(P({},"".concat(l,"-holder-inner"),l)),ref:h},M),v,g)))});ut.displayName="Filler";function zt(e){var h=e.children,s=e.setRef,c=t.useCallback(function(f){s(f)},[]);return t.cloneElement(h,{ref:c})}function Dt(e,h,s,c,f,v,l,u){var M=u.getKey;return e.slice(h,s+1).map(function(d,g){var n=h+g,S=l(d,n,{style:{width:c},offsetX:f}),o=M(d);return t.createElement(zt,{key:o,setRef:function(i){return v(d,i)}},S)})}function Tt(e,h,s){var c=e.length,f=h.length,v,l;if(c===0&&f===0)return null;c<f?(v=e,l=h):(v=h,l=e);var u={__EMPTY_ITEM__:!0};function M(R){return R!==void 0?s(R):u}for(var d=null,g=Math.abs(c-f)!==1,n=0;n<l.length;n+=1){var S=M(v[n]),o=M(l[n]);if(S!==o){d=n,g=g||S!==M(l[n+1]);break}}return d===null?null:{index:d,multiple:g}}function Ct(e,h,s){var c=t.useState(e),f=D(c,2),v=f[0],l=f[1],u=t.useState(null),M=D(u,2),d=M[0],g=M[1];return t.useEffect(function(){var n=Tt(v||[],e||[],h);(n==null?void 0:n.index)!==void 0&&g(e[n.index]),l(e)},[e]),[d]}var Qe=(typeof navigator>"u"?"undefined":ke(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const ot=function(e,h,s,c){var f=t.useRef(!1),v=t.useRef(null);function l(){clearTimeout(v.current),f.current=!0,v.current=setTimeout(function(){f.current=!1},50)}var u=t.useRef({top:e,bottom:h,left:s,right:c});return u.current.top=e,u.current.bottom=h,u.current.left=s,u.current.right=c,function(M,d){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=M?d<0&&u.current.left||d>0&&u.current.right:d<0&&u.current.top||d>0&&u.current.bottom;return g&&n?(clearTimeout(v.current),f.current=!1):(!n||f.current)&&l(),!f.current&&n}};function It(e,h,s,c,f,v,l){var u=t.useRef(0),M=t.useRef(null),d=t.useRef(null),g=t.useRef(!1),n=ot(h,s,c,f);function S(m,y){A.cancel(M.current),u.current+=y,d.current=y,!n(!1,y)&&(Qe||m.preventDefault(),M.current=A(function(){var _=g.current?10:1;l(u.current*_),u.current=0}))}function o(m,y){l(y,!0),Qe||m.preventDefault()}var R=t.useRef(null),i=t.useRef(null);function p(m){if(e){A.cancel(i.current),i.current=A(function(){R.current=null},2);var y=m.deltaX,_=m.deltaY,U=m.shiftKey,N=y,x=_;(R.current==="sx"||!R.current&&U&&_&&!y)&&(N=_,x=0,R.current="sx");var X=Math.abs(N),O=Math.abs(x);R.current===null&&(R.current=v&&X>O?"x":"y"),R.current==="y"?S(m,x):o(m,N)}}function w(m){e&&(g.current=m.detail===d.current)}return[p,w]}function Ht(e,h,s,c){var f=t.useMemo(function(){return[new Map,[]]},[e,s.id,c]),v=D(f,2),l=v[0],u=v[1],M=function(g){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,S=l.get(g),o=l.get(n);if(S===void 0||o===void 0)for(var R=e.length,i=u.length;i<R;i+=1){var p,w=e[i],m=h(w);l.set(m,i);var y=(p=s.get(m))!==null&&p!==void 0?p:c;if(u[i]=(u[i-1]||0)+y,m===g&&(S=i),m===n&&(o=i),S!==void 0&&o!==void 0)break}return{top:u[S-1]||0,bottom:u[o]}};return M}var Pt=function(){function e(){wt(this,e),P(this,"maps",void 0),P(this,"id",0),this.maps=Object.create(null)}return Et(e,[{key:"set",value:function(s,c){this.maps[s]=c,this.id+=1}},{key:"get",value:function(s){return this.maps[s]}}]),e}();function kt(e,h,s){var c=t.useState(0),f=D(c,2),v=f[0],l=f[1],u=t.useRef(new Map),M=t.useRef(new Pt),d=t.useRef();function g(){A.cancel(d.current)}function n(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;g();var R=function(){u.current.forEach(function(p,w){if(p&&p.offsetParent){var m=_t(p),y=m.offsetHeight;M.current.get(w)!==y&&M.current.set(w,m.offsetHeight)}}),l(function(p){return p+1})};o?R():d.current=A(R)}function S(o,R){var i=e(o);u.current.get(i),R?(u.current.set(i,R),n()):u.current.delete(i)}return t.useEffect(function(){return g},[]),[S,n,M.current,v]}var et=14/15;function Ot(e,h,s){var c=t.useRef(!1),f=t.useRef(0),v=t.useRef(0),l=t.useRef(null),u=t.useRef(null),M,d=function(o){if(c.current){var R=Math.ceil(o.touches[0].pageX),i=Math.ceil(o.touches[0].pageY),p=f.current-R,w=v.current-i,m=Math.abs(p)>Math.abs(w);m?f.current=R:v.current=i,s(m,m?p:w)&&o.preventDefault(),clearInterval(u.current),u.current=setInterval(function(){m?p*=et:w*=et;var y=Math.floor(m?p:w);(!s(m,y,!0)||Math.abs(y)<=.1)&&clearInterval(u.current)},16)}},g=function(){c.current=!1,M()},n=function(o){M(),o.touches.length===1&&!c.current&&(c.current=!0,f.current=Math.ceil(o.touches[0].pageX),v.current=Math.ceil(o.touches[0].pageY),l.current=o.target,l.current.addEventListener("touchmove",d,{passive:!1}),l.current.addEventListener("touchend",g,{passive:!0}))};M=function(){l.current&&(l.current.removeEventListener("touchmove",d),l.current.removeEventListener("touchend",g))},Se(function(){return e&&h.current.addEventListener("touchstart",n,{passive:!0}),function(){var S;(S=h.current)===null||S===void 0||S.removeEventListener("touchstart",n),M(),clearInterval(u.current)}},[e])}var $t=10;function Nt(e,h,s,c,f,v,l,u){var M=t.useRef(),d=t.useState(null),g=D(d,2),n=g[0],S=g[1];return Se(function(){if(n&&n.times<$t){if(!e.current){S(function(T){return k({},T)});return}v();var o=n.targetAlign,R=n.originAlign,i=n.index,p=n.offset,w=e.current.clientHeight,m=!1,y=o,_=null;if(w){for(var U=o||R,N=0,x=0,X=0,O=Math.min(h.length-1,i),K=0;K<=O;K+=1){var V=f(h[K]);x=N;var J=s.get(V);X=x+(J===void 0?c:J),N=X}for(var Q=U==="top"?p:w-p,$=O;$>=0;$-=1){var te=f(h[$]),I=s.get(te);if(I===void 0){m=!0;break}if(Q-=I,Q<=0)break}switch(U){case"top":_=x-p;break;case"bottom":_=X-w+p;break;default:{var q=e.current.scrollTop,W=q+w;x<q?y="top":X>W&&(y="bottom")}}_!==null&&l(_),_!==n.lastTop&&(m=!0)}m&&S(k(k({},n),{},{times:n.times+1,targetAlign:y,lastTop:_}))}},[n,e.current]),function(o){if(o==null){u();return}if(A.cancel(M.current),typeof o=="number")l(o);else if(o&&ke(o)==="object"){var R,i=o.align;"index"in o?R=o.index:R=h.findIndex(function(m){return f(m)===o.key});var p=o.offset,w=p===void 0?0:p;S({times:0,index:R,offset:w,originAlign:i})}}}function tt(e,h){var s="touches"in e?e.touches[0]:e;return s[h?"pageX":"pageY"]}var rt=t.forwardRef(function(e,h){var s=e.prefixCls,c=e.rtl,f=e.scrollOffset,v=e.scrollRange,l=e.onStartMove,u=e.onStopMove,M=e.onScroll,d=e.horizontal,g=e.spinSize,n=e.containerSize,S=e.style,o=e.thumbStyle,R=t.useState(!1),i=D(R,2),p=i[0],w=i[1],m=t.useState(null),y=D(m,2),_=y[0],U=y[1],N=t.useState(null),x=D(N,2),X=x[0],O=x[1],K=!c,V=t.useRef(),J=t.useRef(),Q=t.useState(!1),$=D(Q,2),te=$[0],I=$[1],q=t.useRef(),W=function(){clearTimeout(q.current),I(!0),q.current=setTimeout(function(){I(!1)},3e3)},T=v-n||0,oe=n-g||0,L=t.useMemo(function(){if(f===0||T===0)return 0;var H=f/T;return H*oe},[f,T,oe]),ee=function(E){E.stopPropagation(),E.preventDefault()},re=t.useRef({top:L,dragging:p,pageY:_,startTop:X});re.current={top:L,dragging:p,pageY:_,startTop:X};var ne=function(E){w(!0),U(tt(E,d)),O(re.current.top),l(),E.stopPropagation(),E.preventDefault()};t.useEffect(function(){var H=function(ae){ae.preventDefault()},E=V.current,F=J.current;return E.addEventListener("touchstart",H,{passive:!1}),F.addEventListener("touchstart",ne,{passive:!1}),function(){E.removeEventListener("touchstart",H),F.removeEventListener("touchstart",ne)}},[]);var ge=t.useRef();ge.current=T;var le=t.useRef();le.current=oe,t.useEffect(function(){if(p){var H,E=function(ae){var se=re.current,pe=se.dragging,Me=se.pageY,be=se.startTop;A.cancel(H);var ye=V.current.getBoundingClientRect(),ie=n/(d?ye.width:ye.height);if(pe){var ce=(tt(ae,d)-Me)*ie,fe=be;!K&&d?fe-=ce:fe+=ce;var xe=ge.current,Ee=le.current,_e=Ee?fe/Ee:0,j=Math.ceil(_e*xe);j=Math.max(j,0),j=Math.min(j,xe),H=A(function(){M(j,d)})}},F=function(){w(!1),u()};return window.addEventListener("mousemove",E,{passive:!0}),window.addEventListener("touchmove",E,{passive:!0}),window.addEventListener("mouseup",F,{passive:!0}),window.addEventListener("touchend",F,{passive:!0}),function(){window.removeEventListener("mousemove",E),window.removeEventListener("touchmove",E),window.removeEventListener("mouseup",F),window.removeEventListener("touchend",F),A.cancel(H)}}},[p]),t.useEffect(function(){return W(),function(){clearTimeout(q.current)}},[f]),t.useImperativeHandle(h,function(){return{delayHidden:W}});var C="".concat(s,"-scrollbar"),Y={position:"absolute",visibility:te?null:"hidden"},B={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return d?(Y.height=8,Y.left=0,Y.right=0,Y.bottom=0,B.height="100%",B.width=g,K?B.left=L:B.right=L):(Y.width=8,Y.top=0,Y.bottom=0,K?Y.right=0:Y.left=0,B.width="100%",B.height=g,B.top=L),t.createElement("div",{ref:V,className:Le(C,P(P(P({},"".concat(C,"-horizontal"),d),"".concat(C,"-vertical"),!d),"".concat(C,"-visible"),te)),style:k(k({},Y),S),onMouseDown:ee,onMouseMove:W},t.createElement("div",{ref:J,className:Le("".concat(C,"-thumb"),P({},"".concat(C,"-thumb-moving"),p)),style:k(k({},B),o),onMouseDown:ne}))}),Yt=20;function nt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=e/h*e;return isNaN(s)&&(s=0),s=Math.max(s,Yt),Math.floor(s)}var Ft=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Xt=[],Wt={overflowY:"auto",overflowAnchor:"none"};function Vt(e,h){var s=e.prefixCls,c=s===void 0?"rc-virtual-list":s,f=e.className,v=e.height,l=e.itemHeight,u=e.fullHeight,M=u===void 0?!0:u,d=e.style,g=e.data,n=e.children,S=e.itemKey,o=e.virtual,R=e.direction,i=e.scrollWidth,p=e.component,w=p===void 0?"div":p,m=e.onScroll,y=e.onVirtualScroll,_=e.onVisibleChange,U=e.innerProps,N=e.extraRender,x=e.styles,X=Lt(e,Ft),O=t.useCallback(function(a){return typeof S=="function"?S(a):a==null?void 0:a[S]},[S]),K=kt(O),V=D(K,4),J=V[0],Q=V[1],$=V[2],te=V[3],I=!!(o!==!1&&v&&l),q=t.useMemo(function(){return Object.values($.maps).reduce(function(a,r){return a+r},0)},[$.id,$.maps]),W=I&&g&&(Math.max(l*g.length,q)>v||!!i),T=R==="rtl",oe=Le(c,P({},"".concat(c,"-rtl"),T),f),L=g||Xt,ee=t.useRef(),re=t.useRef(),ne=t.useRef(),ge=t.useState(0),le=D(ge,2),C=le[0],Y=le[1],B=t.useState(0),H=D(B,2),E=H[0],F=H[1],Re=t.useState(!1),ae=D(Re,2),se=ae[0],pe=ae[1],Me=function(){pe(!0)},be=function(){pe(!1)},ye={getKey:O};function ie(a){Y(function(r){var b;typeof a=="function"?b=a(r):b=a;var z=dt(b);return ee.current.scrollTop=z,z})}var ce=t.useRef({start:0,end:L.length}),fe=t.useRef(),xe=Ct(L,O),Ee=D(xe,1),_e=Ee[0];fe.current=_e;var j=t.useMemo(function(){if(!I)return{scrollHeight:void 0,start:0,end:L.length-1,offset:void 0};if(!W){var a;return{scrollHeight:((a=re.current)===null||a===void 0?void 0:a.offsetHeight)||0,start:0,end:L.length-1,offset:void 0}}for(var r=0,b,z,Z,bt=L.length,me=0;me<bt;me+=1){var yt=L[me],xt=O(yt),qe=$.get(xt),Pe=r+(qe===void 0?l:qe);Pe>=C&&b===void 0&&(b=me,z=r),Pe>C+v&&Z===void 0&&(Z=me),r=Pe}return b===void 0&&(b=0,z=0,Z=Math.ceil(v/l)),Z===void 0&&(Z=L.length-1),Z=Math.min(Z+1,L.length-1),{scrollHeight:r,start:b,end:Z,offset:z}},[W,I,C,L,te,v]),ue=j.scrollHeight,ve=j.start,de=j.end,Oe=j.offset;ce.current.start=ve,ce.current.end=de;var lt=t.useState({width:0,height:v}),$e=D(lt,2),G=$e[0],st=$e[1],ct=function(r){st({width:r.offsetWidth,height:r.offsetHeight})},Ne=t.useRef(),Ye=t.useRef(),ft=t.useMemo(function(){return nt(G.width,i)},[G.width,i]),vt=t.useMemo(function(){return nt(G.height,ue)},[G.height,ue]),ze=ue-v,De=t.useRef(ze);De.current=ze;function dt(a){var r=a;return Number.isNaN(De.current)||(r=Math.min(r,De.current)),r=Math.max(r,0),r}var Fe=C<=0,Xe=C>=ze,We=E<=0,Ve=E>=i,ht=ot(Fe,Xe,We,Ve),Te=function(){return{x:T?-E:E,y:C}},Ce=t.useRef(Te()),we=Ze(function(a){if(y){var r=k(k({},Te()),a);(Ce.current.x!==r.x||Ce.current.y!==r.y)&&(y(r),Ce.current=r)}});function Be(a,r){var b=a;r?(Je.flushSync(function(){F(b)}),we()):ie(b)}function mt(a){var r=a.currentTarget.scrollTop;r!==C&&ie(r),m==null||m(a),we()}var Ie=function(r){var b=r,z=i?i-G.width:0;return b=Math.max(b,0),b=Math.min(b,z),b},St=Ze(function(a,r){r?(Je.flushSync(function(){F(function(b){var z=b+(T?-a:a);return Ie(z)})}),we()):ie(function(b){var z=b+a;return z})}),gt=It(I,Fe,Xe,We,Ve,!!i,St),je=D(gt,2),He=je[0],Ae=je[1];Ot(I,ee,function(a,r,b){return ht(a,r,b)?!1:(He({preventDefault:function(){},deltaX:a?r:0,deltaY:a?0:r}),!0)}),Se(function(){function a(b){I&&b.preventDefault()}var r=ee.current;return r.addEventListener("wheel",He,{passive:!1}),r.addEventListener("DOMMouseScroll",Ae,{passive:!0}),r.addEventListener("MozMousePixelScroll",a,{passive:!1}),function(){r.removeEventListener("wheel",He),r.removeEventListener("DOMMouseScroll",Ae),r.removeEventListener("MozMousePixelScroll",a)}},[I]),Se(function(){if(i){var a=Ie(E);F(a),we({x:a})}},[G.width,i]);var Ke=function(){var r,b;(r=Ne.current)===null||r===void 0||r.delayHidden(),(b=Ye.current)===null||b===void 0||b.delayHidden()},Ge=Nt(ee,L,$,l,O,function(){return Q(!0)},ie,Ke);t.useImperativeHandle(h,function(){return{nativeElement:ne.current,getScrollInfo:Te,scrollTo:function(r){function b(z){return z&&ke(z)==="object"&&("left"in z||"top"in z)}b(r)?(r.left!==void 0&&F(Ie(r.left)),Ge(r.top)):Ge(r)}}}),Se(function(){if(_){var a=L.slice(ve,de+1);_(a,L)}},[ve,de,L]);var Rt=Ht(L,O,$,l),pt=N==null?void 0:N({start:ve,end:de,virtual:W,offsetX:E,offsetY:Oe,rtl:T,getSize:Rt}),Mt=Dt(L,ve,de,i,E,J,n,ye),he=null;v&&(he=k(P({},M?"height":"maxHeight",v),Wt),I&&(he.overflowY="hidden",i&&(he.overflowX="hidden"),se&&(he.pointerEvents="none")));var Ue={};return T&&(Ue.dir="rtl"),t.createElement("div",at({ref:ne,style:k(k({},d),{},{position:"relative"}),className:oe},Ue,X),t.createElement(it,{onResize:ct},t.createElement(w,{className:"".concat(c,"-holder"),style:he,ref:ee,onScroll:mt,onMouseEnter:Ke},t.createElement(ut,{prefixCls:c,height:ue,offsetX:E,offsetY:Oe,scrollWidth:i,onInnerResize:Q,ref:re,innerProps:U,rtl:T,extra:pt},Mt))),W&&ue>v&&t.createElement(rt,{ref:Ne,prefixCls:c,scrollOffset:C,scrollRange:ue,rtl:T,onScroll:Be,onStartMove:Me,onStopMove:be,spinSize:vt,containerSize:G.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb}),W&&i>G.width&&t.createElement(rt,{ref:Ye,prefixCls:c,scrollOffset:E,scrollRange:i,rtl:T,onScroll:Be,onStartMove:Me,onStopMove:be,spinSize:ft,containerSize:G.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb}))}var Bt=t.forwardRef(Vt);Bt.displayName="List";export{Bt as L};
