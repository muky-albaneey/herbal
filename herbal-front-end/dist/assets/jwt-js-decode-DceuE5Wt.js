var T=Object.defineProperty;var x=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var i=(e,t,r)=>x(e,typeof t!="symbol"?t+"":t,r);import{p as o}from"./pako-BoIYYwlZ.js";const u="Illegal argument specified!",E="Could not find 'pako'.",S="Unsupported zip type.";function c(e,t,r="argument",n="string"){let f=`Invalid argument passed to ${t}.`;return typeof e!==n?f+=` Expected type '${n}', received '${typeof e}'.`:e?r!=="argument"&&(f+=` Provided ${r} is invalid.`):f+=` Provided ${r} is empty.`,f}const a=typeof window=="object"&&(window.crypto||window.msCrypto);a&&(a.subtle||a.webkitSubtle||a.Subtle);class A{constructor(t,r="JwtSplit"){i(this,"header","");i(this,"payload","");i(this,"signature","");if(typeof t!="string")throw new Error(c(t,r,"JWT string"));this.fromString(t,r)}fromString(t,r="JwtSplit.fromString"){const n=t.split(".");if(n.length!==3)throw new Error(c(t,r,"JWT string"));const[f,z,m]=n;this.header=f,this.payload=z,this.signature=m}toString(){return this.header+"."+this.payload+"."+this.signature}}class D{constructor(t,r="JwtDecode"){i(this,"header",{});i(this,"payload",{});i(this,"signature","");if(typeof t!="string")throw new Error(c(t,r,"JWT string"));this.fromString(t,r)}isGzip(){return C(this.header)}fromString(t,r="JwtDecode.fromString"){const n=G(t,r);n&&(this.header=n.header?s(p(n.header)):{},this.payload=n.payload?this.isGzip()?s(I(n.payload)):s(p(n.payload)):{},this.signature=n.signature||"")}toString(){return l(d(this.header))+"."+(this.isGzip()?_(d(this.payload)):l(d(this.payload)))+"."+this.signature}}function s(e){return JSON.parse(e)}function d(e){return JSON.stringify(e)}function J(e){if(typeof Buffer<"u")return w(Buffer.from(e,"base64"));if(typeof atob<"u")return w(atob(e));throw new Error(u)}function U(e){if(typeof e!="string"||e.length%4!==0)throw new Error(u);return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function j(e){if(typeof e!="string"||e.length%4===1)throw new Error(u);for(;e.length%4!==0;)e+="=";return e.replace(/-/g,"+").replace(/_/g,"/")}function p(e){return J(j(e))}function C(e){return typeof e=="object"&&typeof e.zip=="string"&&e.zip.toUpperCase()==="GZIP"}function P(e,t="jwtDecode"){return new D(e,t)}const k=P;function G(e,t="jwtSplit"){return new A(e,t)}function O(e){if(typeof Buffer<"u")return Buffer.from(y(e)).toString("base64");if(typeof btoa<"u")return btoa(h(y(e)));throw new Error(u)}function l(e){return U(O(e))}function _(e,t="zlib"){return l($(e,t))}function B(e){if(typeof e!="string")throw new Error(u);if(o&&(o.inflate||o.ungzip)){const t=g(e);let r;try{r=o.inflate(t,{raw:!1})}catch{try{r=o.ungzip(t,{raw:!1})}catch{throw new Error(S)}}return h(r)}else throw new Error(E)}function I(e){return w(B(p(e)))}function $(e,t="zlib"){if(typeof e!="string")throw new Error(u);if(o&&(o.deflate||o.gzip)){let r;if(t==="gzip")r=o.gzip(e,{raw:!1});else if(t==="zlib")r=o.deflate(e,{raw:!1});else throw new Error(S);return h(r)}else throw new Error(E)}function g(e){const t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}function h(e){return e instanceof Uint8Array||(e=new Uint8Array(e)),String.fromCharCode(...Array.from(e))}function q(e){return Array.prototype.some.apply(e,[t=>t.charCodeAt(0)>255])}function y(e){if(q(e)){const t=v();if(t)return t.encode(e)}return g(e)}function w(e){if(typeof e=="string"){try{const t=b("utf8",{fatal:!0});if(t)return t.decode(g(e))}catch{}return e}try{const t=b("utf8",{fatal:!0});if(t)return t.decode(e)}catch{}return e.toString("binary")}function v(){if(typeof TextEncoder<"u")return new TextEncoder;if(typeof require<"u"){const e=require("util");if(typeof(e==null?void 0:e.TextEncoder)<"u")return new e.TextEncoder}return!1}function b(...e){if(typeof TextDecoder<"u")return new TextDecoder(...e);if(typeof require<"u"){const t=require("util");if(typeof(t==null?void 0:t.TextDecoder)<"u")return new t.TextDecoder(...e)}return!1}export{k as d};
