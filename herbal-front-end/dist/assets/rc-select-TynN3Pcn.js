import{r as t,a as yn}from"./react-CWdn-sfl.js";import{K as D,w as st,f as ft,B as mn,b as dt,l as vt,e as mt,u as gt,z as En,o as pt,y as ht,c as bt,x as St}from"./rc-util-DDDTlteG.js";import{c as je}from"./classnames-satyqWY2.js";import{F as wt}from"./rc-overflow-BTaf03CW.js";import"./react-dom-DX1M9HrU.js";import"./rc-resize-observer-BMteYGkJ.js";import"./rc-motion-YSYiMJr4.js";import{e as gn,c as ie,d as q,b as re,g as $e,k as en,r as Ct,f as Ie}from"./@babel-CyN6Efhd.js";import{T as yt}from"./@rc-component-crLkcb5W.js";import{L as It}from"./rc-virtual-list-BTrh068q.js";var pn=function(e){var a=e.className,o=e.customizeIcon,r=e.customizeIconProps,i=e.children,u=e.onMouseDown,c=e.onClick,v=typeof o=="function"?o(r):o;return t.createElement("span",{className:a,onMouseDown:function(s){s.preventDefault(),u==null||u(s)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:c,"aria-hidden":!0},v!==void 0?v:t.createElement("span",{className:je(a.split(/\s+/).map(function(g){return"".concat(g,"-icon")}))},i))},Et=function(e,a,o,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,c=arguments.length>6?arguments[6]:void 0,v=arguments.length>7?arguments[7]:void 0,g=yn.useMemo(function(){if(gn(r)==="object")return r.clearIcon;if(i)return i},[r,i]),s=yn.useMemo(function(){return!!(!u&&r&&(o.length||c)&&!(v==="combobox"&&c===""))},[r,u,o.length,c,v]);return{allowClear:s,clearIcon:yn.createElement(pn,{className:"".concat(e,"-clear"),onMouseDown:a,customizeIcon:g},"×")}},zn=t.createContext(null);function Rt(){return t.useContext(zn)}function Dt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),a=ie(e,2),o=a[0],r=a[1],i=t.useRef(null),u=function(){window.clearTimeout(i.current)};t.useEffect(function(){return u},[]);var c=function(g,s){u(),i.current=window.setTimeout(function(){r(g),s&&s()},n)};return[o,c,u]}function Bn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),a=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(a.current)}},[]);function o(r){(r||e.current===null)&&(e.current=r),window.clearTimeout(a.current),a.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},o]}function xt(n,e,a,o){var r=t.useRef(null);r.current={open:e,triggerOpen:a,customizedTrigger:o},t.useEffect(function(){function i(u){var c;if(!((c=r.current)!==null&&c!==void 0&&c.customizedTrigger)){var v=u.target;v.shadowRoot&&u.composed&&(v=u.composedPath()[0]||v),r.current.open&&n().filter(function(g){return g}).every(function(g){return!g.contains(v)&&g!==v})&&r.current.triggerOpen(!1)}}return window.addEventListener("mousedown",i),function(){return window.removeEventListener("mousedown",i)}},[])}function Mt(n){return![D.ESC,D.SHIFT,D.BACKSPACE,D.TAB,D.WIN_KEY,D.ALT,D.META,D.WIN_KEY_RIGHT,D.CTRL,D.SEMICOLON,D.EQUALS,D.CAPS_LOCK,D.CONTEXT_MENU,D.F1,D.F2,D.F3,D.F4,D.F5,D.F6,D.F7,D.F8,D.F9,D.F10,D.F11,D.F12].includes(n)}var Ot=function(e,a){var o,r=e.prefixCls,i=e.id,u=e.inputElement,c=e.disabled,v=e.tabIndex,g=e.autoFocus,s=e.autoComplete,m=e.editable,O=e.activeDescendantId,l=e.value,E=e.maxLength,w=e.onKeyDown,y=e.onMouseDown,T=e.onChange,Z=e.onPaste,U=e.onCompositionStart,_=e.onCompositionEnd,X=e.open,ee=e.attrs,L=u||t.createElement("input",null),oe=L,ae=oe.ref,j=oe.props,B=j.onKeyDown,$=j.onChange,H=j.onMouseDown,K=j.onCompositionStart,G=j.onCompositionEnd,Y=j.style;return st(!("maxLength"in L.props)),L=t.cloneElement(L,q(q(q({type:"search"},j),{},{id:i,ref:ft(a,ae),disabled:c,tabIndex:v,autoComplete:s||"off",autoFocus:g,className:je("".concat(r,"-selection-search-input"),(o=L)===null||o===void 0||(o=o.props)===null||o===void 0?void 0:o.className),role:"combobox","aria-expanded":X||!1,"aria-haspopup":"listbox","aria-owns":"".concat(i,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(i,"_list"),"aria-activedescendant":X?O:void 0},ee),{},{value:m?l:"",maxLength:E,readOnly:!m,unselectable:m?null:"on",style:q(q({},Y),{},{opacity:m?null:0}),onKeyDown:function(b){w(b),B&&B(b)},onMouseDown:function(b){y(b),H&&H(b)},onChange:function(b){T(b),$&&$(b)},onCompositionStart:function(b){U(b),K&&K(b)},onCompositionEnd:function(b){_(b),G&&G(b)},onPaste:Z})),L},Wn=t.forwardRef(Ot);function Un(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var Pt=typeof window<"u"&&window.document&&window.document.documentElement,Nt=Pt;function Vt(n){return n!=null}function _t(n){return!n&&n!==0}function Ln(n){return["string","number"].includes(gn(n))}function Hn(n){var e=void 0;return n&&(Ln(n.title)?e=n.title.toString():Ln(n.label)&&(e=n.label.toString())),e}function Tt(n,e){Nt?t.useLayoutEffect(n,e):t.useEffect(n,e)}function Lt(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var An=function(e){e.preventDefault(),e.stopPropagation()},At=function(e){var a=e.id,o=e.prefixCls,r=e.values,i=e.open,u=e.searchValue,c=e.autoClearSearchValue,v=e.inputRef,g=e.placeholder,s=e.disabled,m=e.mode,O=e.showSearch,l=e.autoFocus,E=e.autoComplete,w=e.activeDescendantId,y=e.tabIndex,T=e.removeIcon,Z=e.maxTagCount,U=e.maxTagTextLength,_=e.maxTagPlaceholder,X=_===void 0?function(P){return"+ ".concat(P.length," ...")}:_,ee=e.tagRender,L=e.onToggleOpen,oe=e.onRemove,ae=e.onInputChange,j=e.onInputPaste,B=e.onInputKeyDown,$=e.onInputMouseDown,H=e.onInputCompositionStart,K=e.onInputCompositionEnd,G=t.useRef(null),Y=t.useState(0),M=ie(Y,2),b=M[0],A=M[1],J=t.useState(!1),xe=ie(J,2),Ce=xe[0],Me=xe[1],ne="".concat(o,"-selection"),me=i||m==="multiple"&&c===!1||m==="tags"?u:"",ze=m==="tags"||m==="multiple"&&c===!1||O&&(i||Ce);Tt(function(){A(G.current.scrollWidth)},[me]);var te=function(h,N,F,Q,z){return t.createElement("span",{title:Hn(h),className:je("".concat(ne,"-item"),re({},"".concat(ne,"-item-disabled"),F))},t.createElement("span",{className:"".concat(ne,"-item-content")},N),Q&&t.createElement(pn,{className:"".concat(ne,"-item-remove"),onMouseDown:An,onClick:z,customizeIcon:T},"×"))},Oe=function(h,N,F,Q,z,ce){var ye=function(Ae){An(Ae),L(!i)};return t.createElement("span",{onMouseDown:ye},ee({label:N,value:h,disabled:F,closable:Q,onClose:z,isMaxTag:!!ce}))},Le=function(h){var N=h.disabled,F=h.label,Q=h.value,z=!s&&!N,ce=F;if(typeof U=="number"&&(typeof F=="string"||typeof F=="number")){var ye=String(ce);ye.length>U&&(ce="".concat(ye.slice(0,U),"..."))}var Pe=function(Fe){Fe&&Fe.stopPropagation(),oe(h)};return typeof ee=="function"?Oe(Q,ce,N,z,Pe):te(h,ce,N,z,Pe)},C=function(h){var N=typeof X=="function"?X(h):X;return typeof ee=="function"?Oe(void 0,N,!1,!1,void 0,!0):te({title:N},N,!1)},d=t.createElement("div",{className:"".concat(ne,"-search"),style:{width:b},onFocus:function(){Me(!0)},onBlur:function(){Me(!1)}},t.createElement(Wn,{ref:v,open:i,prefixCls:o,id:a,inputElement:null,disabled:s,autoFocus:l,autoComplete:E,editable:ze,activeDescendantId:w,value:me,onKeyDown:B,onMouseDown:$,onChange:ae,onPaste:j,onCompositionStart:H,onCompositionEnd:K,tabIndex:y,attrs:mn(e,!0)}),t.createElement("span",{ref:G,className:"".concat(ne,"-search-mirror"),"aria-hidden":!0},me," ")),x=t.createElement(wt,{prefixCls:"".concat(ne,"-overflow"),data:r,renderItem:Le,renderRest:C,suffix:d,itemKey:Lt,maxCount:Z});return t.createElement(t.Fragment,null,x,!r.length&&!me&&t.createElement("span",{className:"".concat(ne,"-placeholder")},g))},Ft=function(e){var a=e.inputElement,o=e.prefixCls,r=e.id,i=e.inputRef,u=e.disabled,c=e.autoFocus,v=e.autoComplete,g=e.activeDescendantId,s=e.mode,m=e.open,O=e.values,l=e.placeholder,E=e.tabIndex,w=e.showSearch,y=e.searchValue,T=e.activeValue,Z=e.maxLength,U=e.onInputKeyDown,_=e.onInputMouseDown,X=e.onInputChange,ee=e.onInputPaste,L=e.onInputCompositionStart,oe=e.onInputCompositionEnd,ae=e.title,j=t.useState(!1),B=ie(j,2),$=B[0],H=B[1],K=s==="combobox",G=K||w,Y=O[0],M=y||"";K&&T&&!$&&(M=T),t.useEffect(function(){K&&H(!1)},[K,T]);var b=s!=="combobox"&&!m&&!w?!1:!!M,A=ae===void 0?Hn(Y):ae,J=t.useMemo(function(){return Y?null:t.createElement("span",{className:"".concat(o,"-selection-placeholder"),style:b?{visibility:"hidden"}:void 0},l)},[Y,b,l,o]);return t.createElement(t.Fragment,null,t.createElement("span",{className:"".concat(o,"-selection-search")},t.createElement(Wn,{ref:i,prefixCls:o,id:r,open:m,inputElement:a,disabled:u,autoFocus:c,autoComplete:v,editable:G,activeDescendantId:g,value:M,onKeyDown:U,onMouseDown:_,onChange:function(Ce){H(!0),X(Ce)},onPaste:ee,onCompositionStart:L,onCompositionEnd:oe,tabIndex:E,attrs:mn(e,!0),maxLength:K?Z:void 0})),!K&&Y?t.createElement("span",{className:"".concat(o,"-selection-item"),title:A,style:b?{visibility:"hidden"}:void 0},Y.label):null,J)},kt=function(e,a){var o=t.useRef(null),r=t.useRef(!1),i=e.prefixCls,u=e.open,c=e.mode,v=e.showSearch,g=e.tokenWithEnter,s=e.disabled,m=e.autoClearSearchValue,O=e.onSearch,l=e.onSearchSubmit,E=e.onToggleOpen,w=e.onInputKeyDown,y=e.domRef;t.useImperativeHandle(a,function(){return{focus:function(b){o.current.focus(b)},blur:function(){o.current.blur()}}});var T=Bn(0),Z=ie(T,2),U=Z[0],_=Z[1],X=function(b){var A=b.which;(A===D.UP||A===D.DOWN)&&b.preventDefault(),w&&w(b),A===D.ENTER&&c==="tags"&&!r.current&&!u&&(l==null||l(b.target.value)),Mt(A)&&E(!0)},ee=function(){_(!0)},L=t.useRef(null),oe=function(b){O(b,!0,r.current)!==!1&&E(!0)},ae=function(){r.current=!0},j=function(b){r.current=!1,c!=="combobox"&&oe(b.target.value)},B=function(b){var A=b.target.value;if(g&&L.current&&/[\r\n]/.test(L.current)){var J=L.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");A=A.replace(J,L.current)}L.current=null,oe(A)},$=function(b){var A=b.clipboardData,J=A==null?void 0:A.getData("text");L.current=J||""},H=function(b){var A=b.target;if(A!==o.current){var J=document.body.style.msTouchAction!==void 0;J?setTimeout(function(){o.current.focus()}):o.current.focus()}},K=function(b){var A=U();b.target!==o.current&&!A&&!(c==="combobox"&&s)&&b.preventDefault(),(c!=="combobox"&&(!v||!A)||!u)&&(u&&m!==!1&&O("",!0,!1),E())},G={inputRef:o,onInputKeyDown:X,onInputMouseDown:ee,onInputChange:B,onInputPaste:$,onInputCompositionStart:ae,onInputCompositionEnd:j},Y=c==="multiple"||c==="tags"?t.createElement(At,$e({},e,G)):t.createElement(Ft,$e({},e,G));return t.createElement("div",{ref:y,className:"".concat(i,"-selector"),onClick:H,onMouseDown:K},Y)},Kt=t.forwardRef(kt),$t=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],zt=function(e){var a=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"}}},Bt=function(e,a){var o=e.prefixCls;e.disabled;var r=e.visible,i=e.children,u=e.popupElement,c=e.animation,v=e.transitionName,g=e.dropdownStyle,s=e.dropdownClassName,m=e.direction,O=m===void 0?"ltr":m,l=e.placement,E=e.builtinPlacements,w=e.dropdownMatchSelectWidth,y=e.dropdownRender,T=e.dropdownAlign,Z=e.getPopupContainer,U=e.empty,_=e.getTriggerDOMNode,X=e.onPopupVisibleChange,ee=e.onPopupMouseEnter,L=en(e,$t),oe="".concat(o,"-dropdown"),ae=u;y&&(ae=y(u));var j=t.useMemo(function(){return E||zt(w)},[E,w]),B=c?"".concat(oe,"-").concat(c):v,$=typeof w=="number",H=t.useMemo(function(){return $?null:w===!1?"minWidth":"width"},[w,$]),K=g;$&&(K=q(q({},K),{},{width:w}));var G=t.useRef(null);return t.useImperativeHandle(a,function(){return{getPopupElement:function(){var M;return(M=G.current)===null||M===void 0?void 0:M.popupElement}}}),t.createElement(yt,$e({},L,{showAction:X?["click"]:[],hideAction:X?["click"]:[],popupPlacement:l||(O==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:j,prefixCls:oe,popupTransitionName:B,popup:t.createElement("div",{onMouseEnter:ee},ae),ref:G,stretch:H,popupAlign:T,popupVisible:r,getPopupContainer:Z,popupClassName:je(s,re({},"".concat(oe,"-empty"),U)),popupStyle:K,getTriggerDOMNode:_,onPopupVisibleChange:X}),i)},Wt=t.forwardRef(Bt);function Fn(n,e){var a=n.key,o;return"value"in n&&(o=n.value),a??(o!==void 0?o:"rc-index-key-".concat(e))}function Rn(n){return typeof n<"u"&&!Number.isNaN(n)}function jn(n,e){var a=n||{},o=a.label,r=a.value,i=a.options,u=a.groupLabel,c=o||(e?"children":"label");return{label:c,value:r||"value",options:i||"options",groupLabel:u||c}}function Ut(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.fieldNames,o=e.childrenAsData,r=[],i=jn(a,!1),u=i.label,c=i.value,v=i.options,g=i.groupLabel;function s(m,O){Array.isArray(m)&&m.forEach(function(l){if(O||!(v in l)){var E=l[c];r.push({key:Fn(l,r.length),groupOption:O,data:l,label:l[u],value:E})}else{var w=l[g];w===void 0&&o&&(w=l.label),r.push({key:Fn(l,r.length),group:!0,data:l,label:w}),s(l[v],!0)}})}return s(n,!1),r}function Dn(n){var e=q({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return dt(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var Ht=function(e,a,o){if(!a||!a.length)return null;var r=!1,i=function c(v,g){var s=Ct(g),m=s[0],O=s.slice(1);if(!m)return[v];var l=v.split(m);return r=r||l.length>1,l.reduce(function(E,w){return[].concat(Ie(E),Ie(c(w,O)))},[]).filter(Boolean)},u=i(e,a);return r?typeof o<"u"?u.slice(0,o):u:null},Mn=t.createContext(null);function jt(n){var e=n.visible,a=n.values;if(!e)return null;var o=50;return t.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(a.slice(0,o).map(function(r){var i=r.label,u=r.value;return["number","string"].includes(gn(i))?i:u}).join(", ")),a.length>o?", ...":null)}var Gt=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Yt=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],xn=function(e){return e==="tags"||e==="multiple"},Xt=t.forwardRef(function(n,e){var a,o=n.id,r=n.prefixCls,i=n.className,u=n.showSearch,c=n.tagRender,v=n.direction,g=n.omitDomProps,s=n.displayValues,m=n.onDisplayValuesChange,O=n.emptyOptions,l=n.notFoundContent,E=l===void 0?"Not Found":l,w=n.onClear,y=n.mode,T=n.disabled,Z=n.loading,U=n.getInputElement,_=n.getRawInputElement,X=n.open,ee=n.defaultOpen,L=n.onDropdownVisibleChange,oe=n.activeValue,ae=n.onActiveValueChange,j=n.activeDescendantId,B=n.searchValue,$=n.autoClearSearchValue,H=n.onSearch,K=n.onSearchSplit,G=n.tokenSeparators,Y=n.allowClear,M=n.suffixIcon,b=n.clearIcon,A=n.OptionList,J=n.animation,xe=n.transitionName,Ce=n.dropdownStyle,Me=n.dropdownClassName,ne=n.dropdownMatchSelectWidth,me=n.dropdownRender,ze=n.dropdownAlign,te=n.placement,Oe=n.builtinPlacements,Le=n.getPopupContainer,C=n.showAction,d=C===void 0?[]:C,x=n.onFocus,P=n.onBlur,h=n.onKeyUp,N=n.onKeyDown,F=n.onMouseDown,Q=en(n,Gt),z=xn(y),ce=(u!==void 0?u:z)||y==="combobox",ye=q({},Q);Yt.forEach(function(V){delete ye[V]}),g==null||g.forEach(function(V){delete ye[V]});var Pe=t.useState(!1),Ae=ie(Pe,2),Fe=Ae[0],se=Ae[1];t.useEffect(function(){se(vt())},[]);var Be=t.useRef(null),ge=t.useRef(null),pe=t.useRef(null),fe=t.useRef(null),We=t.useRef(null),he=t.useRef(!1),Ge=Dt(),Ne=ie(Ge,3),Ve=Ne[0],Ee=Ne[1],hn=Ne[2];t.useImperativeHandle(e,function(){var V,I;return{focus:(V=fe.current)===null||V===void 0?void 0:V.focus,blur:(I=fe.current)===null||I===void 0?void 0:I.blur,scrollTo:function(Se){var le;return(le=We.current)===null||le===void 0?void 0:le.scrollTo(Se)},nativeElement:Be.current||ge.current}});var Re=t.useMemo(function(){var V;if(y!=="combobox")return B;var I=(V=s[0])===null||V===void 0?void 0:V.value;return typeof I=="string"||typeof I=="number"?String(I):""},[B,y,s]),rn=y==="combobox"&&typeof U=="function"&&U()||null,we=typeof _=="function"&&_(),bn=mt(ge,we==null||(a=we.props)===null||a===void 0?void 0:a.ref),un=t.useState(!1),ln=ie(un,2),Sn=ln[0],cn=ln[1];gt(function(){cn(!0)},[]);var sn=En(!1,{defaultValue:ee,value:X}),Ye=ie(sn,2),nn=Ye[0],tn=Ye[1],ue=Sn?nn:!1,fn=!E&&O;(T||fn&&ue&&y==="combobox")&&(ue=!1);var Qe=fn?!1:ue,f=t.useCallback(function(V){var I=V!==void 0?V:!ue;T||(tn(I),ue!==I&&(L==null||L(I)))},[T,ue,tn,L]),S=t.useMemo(function(){return(G||[]).some(function(V){return[`
`,`\r
`].includes(V)})},[G]),p=t.useContext(Mn)||{},R=p.maxCount,k=p.rawValues,W=function(I,be,Se){if(!(z&&Rn(R)&&(k==null?void 0:k.size)>=R)){var le=!0,ve=I;ae==null||ae(null);var Ke=Ht(I,G,Rn(R)?R-k.size:void 0),Te=Se?null:Ke;return y!=="combobox"&&Te&&(ve="",K==null||K(Te),f(!1),le=!1),H&&Re!==ve&&H(ve,{source:be?"typing":"effect"}),le}},ke=function(I){!I||!I.trim()||H(I,{source:"submit"})};t.useEffect(function(){!ue&&!z&&y!=="combobox"&&W("",!1,!1)},[ue]),t.useEffect(function(){nn&&T&&tn(!1),T&&!he.current&&Ee(!1)},[T]);var _e=Bn(),Ue=ie(_e,2),de=Ue[0],He=Ue[1],on=t.useRef(!1),wn=function(I){var be=de(),Se=I.key,le=Se==="Enter";if(le&&(y!=="combobox"&&I.preventDefault(),ue||f(!0)),He(!!Re),Se==="Backspace"&&!be&&z&&!Re&&s.length){for(var ve=Ie(s),Ke=null,Te=ve.length-1;Te>=0;Te-=1){var Xe=ve[Te];if(!Xe.disabled){ve.splice(Te,1),Ke=Xe;break}}Ke&&m(ve,{type:"remove",values:[Ke]})}for(var Ze=arguments.length,Je=new Array(Ze>1?Ze-1:0),dn=1;dn<Ze;dn++)Je[dn-1]=arguments[dn];if(ue&&(!le||!on.current)){var vn;(vn=We.current)===null||vn===void 0||vn.onKeyDown.apply(vn,[I].concat(Je))}le&&(on.current=!0),N==null||N.apply(void 0,[I].concat(Je))},On=function(I){for(var be=arguments.length,Se=new Array(be>1?be-1:0),le=1;le<be;le++)Se[le-1]=arguments[le];if(ue){var ve;(ve=We.current)===null||ve===void 0||ve.onKeyUp.apply(ve,[I].concat(Se))}I.key==="Enter"&&(on.current=!1),h==null||h.apply(void 0,[I].concat(Se))},an=function(I){var be=s.filter(function(Se){return Se!==I});m(be,{type:"remove",values:[I]})},De=t.useRef(!1),Qn=function(){Ee(!0),T||(x&&!De.current&&x.apply(void 0,arguments),d.includes("focus")&&f(!0)),De.current=!0},qn=function(){he.current=!0,Ee(!1,function(){De.current=!1,he.current=!1,f(!1)}),!T&&(Re&&(y==="tags"?H(Re,{source:"submit"}):y==="multiple"&&H("",{source:"blur"})),P&&P.apply(void 0,arguments))},qe=[];t.useEffect(function(){return function(){qe.forEach(function(V){return clearTimeout(V)}),qe.splice(0,qe.length)}},[]);var Zn=function(I){var be,Se=I.target,le=(be=pe.current)===null||be===void 0?void 0:be.getPopupElement();if(le&&le.contains(Se)){var ve=setTimeout(function(){var Ze=qe.indexOf(ve);if(Ze!==-1&&qe.splice(Ze,1),hn(),!Fe&&!le.contains(document.activeElement)){var Je;(Je=fe.current)===null||Je===void 0||Je.focus()}});qe.push(ve)}for(var Ke=arguments.length,Te=new Array(Ke>1?Ke-1:0),Xe=1;Xe<Ke;Xe++)Te[Xe-1]=arguments[Xe];F==null||F.apply(void 0,[I].concat(Te))},et=t.useState({}),nt=ie(et,2),tt=nt[1];function ot(){tt({})}var Pn;we&&(Pn=function(I){f(I)}),xt(function(){var V;return[Be.current,(V=pe.current)===null||V===void 0?void 0:V.getPopupElement()]},Qe,f,!!we);var at=t.useMemo(function(){return q(q({},n),{},{notFoundContent:E,open:ue,triggerOpen:Qe,id:o,showSearch:ce,multiple:z,toggleOpen:f})},[n,E,Qe,ue,o,ce,z,f]),Nn=!!M||Z,Vn;Nn&&(Vn=t.createElement(pn,{className:je("".concat(r,"-arrow"),re({},"".concat(r,"-arrow-loading"),Z)),customizeIcon:M,customizeIconProps:{loading:Z,searchValue:Re,open:ue,focused:Ve,showSearch:ce}}));var rt=function(){var I;w==null||w(),(I=fe.current)===null||I===void 0||I.focus(),m([],{type:"clear",values:s}),W("",!1,!1)},_n=Et(r,rt,s,Y,b,T,Re,y),it=_n.allowClear,ut=_n.clearIcon,lt=t.createElement(A,{ref:We}),ct=je(r,i,re(re(re(re(re(re(re(re(re(re({},"".concat(r,"-focused"),Ve),"".concat(r,"-multiple"),z),"".concat(r,"-single"),!z),"".concat(r,"-allow-clear"),Y),"".concat(r,"-show-arrow"),Nn),"".concat(r,"-disabled"),T),"".concat(r,"-loading"),Z),"".concat(r,"-open"),ue),"".concat(r,"-customize-input"),rn),"".concat(r,"-show-search"),ce)),Tn=t.createElement(Wt,{ref:pe,disabled:T,prefixCls:r,visible:Qe,popupElement:lt,animation:J,transitionName:xe,dropdownStyle:Ce,dropdownClassName:Me,direction:v,dropdownMatchSelectWidth:ne,dropdownRender:me,dropdownAlign:ze,placement:te,builtinPlacements:Oe,getPopupContainer:Le,empty:O,getTriggerDOMNode:function(I){return ge.current||I},onPopupVisibleChange:Pn,onPopupMouseEnter:ot},we?t.cloneElement(we,{ref:bn}):t.createElement(Kt,$e({},n,{domRef:ge,prefixCls:r,inputElement:rn,ref:fe,id:o,showSearch:ce,autoClearSearchValue:$,mode:y,activeDescendantId:j,tagRender:c,values:s,open:ue,onToggleOpen:f,activeValue:oe,searchValue:Re,onSearch:W,onSearchSubmit:ke,onRemove:an,tokenWithEnter:S}))),Cn;return we?Cn=Tn:Cn=t.createElement("div",$e({className:ct},ye,{ref:Be,onMouseDown:Zn,onKeyDown:wn,onKeyUp:On,onFocus:Qn,onBlur:qn}),t.createElement(jt,{visible:Ve&&!ue,values:s}),Tn,Vn,it&&ut),t.createElement(zn.Provider,{value:at},Cn)}),Gn=function(){return null};Gn.isSelectOptGroup=!0;var Yn=function(){return null};Yn.isSelectOption=!0;function Jt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Qt=["disabled","title","children","style","className"];function kn(n){return typeof n=="string"||typeof n=="number"}var qt=function(e,a){var o=Rt(),r=o.prefixCls,i=o.id,u=o.open,c=o.multiple,v=o.mode,g=o.searchValue,s=o.toggleOpen,m=o.notFoundContent,O=o.onPopupScroll,l=t.useContext(Mn),E=l.maxCount,w=l.flattenOptions,y=l.onActiveValue,T=l.defaultActiveFirstOption,Z=l.onSelect,U=l.menuItemSelectedIcon,_=l.rawValues,X=l.fieldNames,ee=l.virtual,L=l.direction,oe=l.listHeight,ae=l.listItemHeight,j=l.optionRender,B="".concat(r,"-item"),$=pt(function(){return w},[u,w],function(C,d){return d[0]&&C[1]!==d[1]}),H=t.useRef(null),K=t.useMemo(function(){return c&&Rn(E)&&(_==null?void 0:_.size)>=E},[c,E,_==null?void 0:_.size]),G=function(d){d.preventDefault()},Y=function(d){var x;(x=H.current)===null||x===void 0||x.scrollTo(typeof d=="number"?{index:d}:d)},M=function(d){for(var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,P=$.length,h=0;h<P;h+=1){var N=(d+h*x+P)%P,F=$[N]||{},Q=F.group,z=F.data;if(!Q&&!(z!=null&&z.disabled)&&!K)return N}return-1},b=t.useState(function(){return M(0)}),A=ie(b,2),J=A[0],xe=A[1],Ce=function(d){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;xe(d);var P={source:x?"keyboard":"mouse"},h=$[d];if(!h){y(null,-1,P);return}y(h.value,d,P)};t.useEffect(function(){Ce(T!==!1?M(0):-1)},[$.length,g]);var Me=t.useCallback(function(C){return _.has(C)&&v!=="combobox"},[v,Ie(_).toString(),_.size]);t.useEffect(function(){var C=setTimeout(function(){if(!c&&u&&_.size===1){var x=Array.from(_)[0],P=$.findIndex(function(h){var N=h.data;return N.value===x});P!==-1&&(Ce(P),Y(P))}});if(u){var d;(d=H.current)===null||d===void 0||d.scrollTo(void 0)}return function(){return clearTimeout(C)}},[u,g]);var ne=function(d){d!==void 0&&Z(d,{selected:!_.has(d)}),c||s(!1)};if(t.useImperativeHandle(a,function(){return{onKeyDown:function(d){var x=d.which,P=d.ctrlKey;switch(x){case D.N:case D.P:case D.UP:case D.DOWN:{var h=0;if(x===D.UP?h=-1:x===D.DOWN?h=1:Jt()&&P&&(x===D.N?h=1:x===D.P&&(h=-1)),h!==0){var N=M(J+h,h);Y(N),Ce(N,!0)}break}case D.ENTER:{var F,Q=$[J];Q&&!(Q!=null&&(F=Q.data)!==null&&F!==void 0&&F.disabled)&&!K?ne(Q.value):ne(void 0),u&&d.preventDefault();break}case D.ESC:s(!1),u&&d.stopPropagation()}},onKeyUp:function(){},scrollTo:function(d){Y(d)}}}),$.length===0)return t.createElement("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(B,"-empty"),onMouseDown:G},m);var me=Object.keys(X).map(function(C){return X[C]}),ze=function(d){return d.label};function te(C,d){var x=C.group;return{role:x?"presentation":"option",id:"".concat(i,"_list_").concat(d)}}var Oe=function(d){var x=$[d];if(!x)return null;var P=x.data||{},h=P.value,N=x.group,F=mn(P,!0),Q=ze(x);return x?t.createElement("div",$e({"aria-label":typeof Q=="string"&&!N?Q:null},F,{key:d},te(x,d),{"aria-selected":Me(h)}),h):null},Le={role:"listbox",id:"".concat(i,"_list")};return t.createElement(t.Fragment,null,ee&&t.createElement("div",$e({},Le,{style:{height:0,width:0,overflow:"hidden"}}),Oe(J-1),Oe(J),Oe(J+1)),t.createElement(It,{itemKey:"key",ref:H,data:$,height:oe,itemHeight:ae,fullHeight:!1,onMouseDown:G,onScroll:O,virtual:ee,direction:L,innerProps:ee?null:Le},function(C,d){var x=C.group,P=C.groupOption,h=C.data,N=C.label,F=C.value,Q=h.key;if(x){var z,ce=(z=h.title)!==null&&z!==void 0?z:kn(N)?N.toString():void 0;return t.createElement("div",{className:je(B,"".concat(B,"-group"),h.className),title:ce},N!==void 0?N:Q)}var ye=h.disabled,Pe=h.title;h.children;var Ae=h.style,Fe=h.className,se=en(h,Qt),Be=ht(se,me),ge=Me(F),pe=ye||!ge&&K,fe="".concat(B,"-option"),We=je(B,fe,Fe,re(re(re(re({},"".concat(fe,"-grouped"),P),"".concat(fe,"-active"),J===d&&!pe),"".concat(fe,"-disabled"),pe),"".concat(fe,"-selected"),ge)),he=ze(C),Ge=!U||typeof U=="function"||ge,Ne=typeof he=="number"?he:he||F,Ve=kn(Ne)?Ne.toString():void 0;return Pe!==void 0&&(Ve=Pe),t.createElement("div",$e({},mn(Be),ee?{}:te(C,d),{"aria-selected":ge,className:We,title:Ve,onMouseMove:function(){J===d||pe||Ce(d)},onClick:function(){pe||ne(F)},style:Ae}),t.createElement("div",{className:"".concat(fe,"-content")},typeof j=="function"?j(C,{index:d}):Ne),t.isValidElement(U)||ge,Ge&&t.createElement(pn,{className:"".concat(B,"-option-state"),customizeIcon:U,customizeIconProps:{value:F,disabled:pe,isSelected:ge}},ge?"✓":null))}))},Zt=t.forwardRef(qt);const eo=function(n,e){var a=t.useRef({values:new Map,options:new Map}),o=t.useMemo(function(){var i=a.current,u=i.values,c=i.options,v=n.map(function(m){if(m.label===void 0){var O;return q(q({},m),{},{label:(O=u.get(m.value))===null||O===void 0?void 0:O.label})}return m}),g=new Map,s=new Map;return v.forEach(function(m){g.set(m.value,m),s.set(m.value,e.get(m.value)||c.get(m.value))}),a.current.values=g,a.current.options=s,v},[n,e]),r=t.useCallback(function(i){return e.get(i)||a.current.options.get(i)},[e]);return[o,r]};function In(n,e){return Un(n).join("").toUpperCase().includes(e)}const no=function(n,e,a,o,r){return t.useMemo(function(){if(!a||o===!1)return n;var i=e.options,u=e.label,c=e.value,v=[],g=typeof o=="function",s=a.toUpperCase(),m=g?o:function(l,E){return r?In(E[r],s):E[i]?In(E[u!=="children"?u:"label"],s):In(E[c],s)},O=g?function(l){return Dn(l)}:function(l){return l};return n.forEach(function(l){if(l[i]){var E=m(a,O(l));if(E)v.push(l);else{var w=l[i].filter(function(y){return m(a,O(y))});w.length&&v.push(q(q({},l),{},re({},i,w)))}return}m(a,O(l))&&v.push(l)}),v},[n,o,r,a,e])};var Kn=0,to=bt();function oo(){var n;return to?(n=Kn,Kn+=1):n="TEST_OR_SSR",n}function ao(n){var e=t.useState(),a=ie(e,2),o=a[0],r=a[1];return t.useEffect(function(){r("rc_select_".concat(oo()))},[]),n||o}var ro=["children","value"],io=["children"];function uo(n){var e=n,a=e.key,o=e.props,r=o.children,i=o.value,u=en(o,ro);return q({key:a,value:i!==void 0?i:a,children:r},u)}function Xn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return St(n).map(function(a,o){if(!t.isValidElement(a)||!a.type)return null;var r=a,i=r.type.isSelectOptGroup,u=r.key,c=r.props,v=c.children,g=en(c,io);return e||!i?uo(a):q(q({key:"__RC_SELECT_GRP__".concat(u===null?o:u,"__"),label:u},g),{},{options:Xn(v)})}).filter(function(a){return a})}var lo=function(e,a,o,r,i){return t.useMemo(function(){var u=e,c=!e;c&&(u=Xn(a));var v=new Map,g=new Map,s=function(l,E,w){w&&typeof w=="string"&&l.set(E[w],E)},m=function O(l){for(var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=0;w<l.length;w+=1){var y=l[w];!y[o.options]||E?(v.set(y[o.value],y),s(g,y,o.label),s(g,y,r),s(g,y,i)):O(y[o.options],!0)}};return m(u),{options:u,valueOptions:v,labelOptions:g}},[e,a,o,r,i])};function $n(n){var e=t.useRef();e.current=n;var a=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return a}var co=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],so=["inputValue"];function fo(n){return!n||gn(n)!=="object"}var vo=t.forwardRef(function(n,e){var a=n.id,o=n.mode,r=n.prefixCls,i=r===void 0?"rc-select":r,u=n.backfill,c=n.fieldNames,v=n.inputValue,g=n.searchValue,s=n.onSearch,m=n.autoClearSearchValue,O=m===void 0?!0:m,l=n.onSelect,E=n.onDeselect,w=n.dropdownMatchSelectWidth,y=w===void 0?!0:w,T=n.filterOption,Z=n.filterSort,U=n.optionFilterProp,_=n.optionLabelProp,X=n.options,ee=n.optionRender,L=n.children,oe=n.defaultActiveFirstOption,ae=n.menuItemSelectedIcon,j=n.virtual,B=n.direction,$=n.listHeight,H=$===void 0?200:$,K=n.listItemHeight,G=K===void 0?20:K,Y=n.labelRender,M=n.value,b=n.defaultValue,A=n.labelInValue,J=n.onChange,xe=n.maxCount,Ce=en(n,co),Me=ao(a),ne=xn(o),me=!!(!X&&L),ze=t.useMemo(function(){return T===void 0&&o==="combobox"?!1:T},[T,o]),te=t.useMemo(function(){return jn(c,me)},[JSON.stringify(c),me]),Oe=En("",{value:g!==void 0?g:v,postState:function(S){return S||""}}),Le=ie(Oe,2),C=Le[0],d=Le[1],x=lo(X,L,te,U,_),P=x.valueOptions,h=x.labelOptions,N=x.options,F=t.useCallback(function(f){var S=Un(f);return S.map(function(p){var R,k,W,ke,_e;if(fo(p))R=p;else{var Ue;W=p.key,k=p.label,R=(Ue=p.value)!==null&&Ue!==void 0?Ue:W}var de=P.get(R);if(de){var He;k===void 0&&(k=de==null?void 0:de[_||te.label]),W===void 0&&(W=(He=de==null?void 0:de.key)!==null&&He!==void 0?He:R),ke=de==null?void 0:de.disabled,_e=de==null?void 0:de.title}return{label:k,value:R,key:W,disabled:ke,title:_e}})},[te,_,P]),Q=En(b,{value:M}),z=ie(Q,2),ce=z[0],ye=z[1],Pe=t.useMemo(function(){var f,S=ne&&ce===null?[]:ce,p=F(S);return o==="combobox"&&_t((f=p[0])===null||f===void 0?void 0:f.value)?[]:p},[ce,F,o,ne]),Ae=eo(Pe,P),Fe=ie(Ae,2),se=Fe[0],Be=Fe[1],ge=t.useMemo(function(){if(!o&&se.length===1){var f=se[0];if(f.value===null&&(f.label===null||f.label===void 0))return[]}return se.map(function(S){var p;return q(q({},S),{},{label:(p=typeof Y=="function"?Y(S):S.label)!==null&&p!==void 0?p:S.value})})},[o,se,Y]),pe=t.useMemo(function(){return new Set(se.map(function(f){return f.value}))},[se]);t.useEffect(function(){if(o==="combobox"){var f,S=(f=se[0])===null||f===void 0?void 0:f.value;d(Vt(S)?String(S):"")}},[se]);var fe=$n(function(f,S){var p=S??f;return re(re({},te.value,f),te.label,p)}),We=t.useMemo(function(){if(o!=="tags")return N;var f=Ie(N),S=function(R){return P.has(R)};return Ie(se).sort(function(p,R){return p.value<R.value?-1:1}).forEach(function(p){var R=p.value;S(R)||f.push(fe(R,p.label))}),f},[fe,N,P,se,o]),he=no(We,te,C,ze,U),Ge=t.useMemo(function(){return o!=="tags"||!C||he.some(function(f){return f[U||"value"]===C})||he.some(function(f){return f[te.value]===C})?he:[fe(C)].concat(Ie(he))},[fe,U,o,he,C,te]),Ne=t.useMemo(function(){return Z?Ie(Ge).sort(function(f,S){return Z(f,S,{searchValue:C})}):Ge},[Ge,Z,C]),Ve=t.useMemo(function(){return Ut(Ne,{fieldNames:te,childrenAsData:me})},[Ne,te,me]),Ee=function(S){var p=F(S);if(ye(p),J&&(p.length!==se.length||p.some(function(W,ke){var _e;return((_e=se[ke])===null||_e===void 0?void 0:_e.value)!==(W==null?void 0:W.value)}))){var R=A?p:p.map(function(W){return W.value}),k=p.map(function(W){return Dn(Be(W.value))});J(ne?R:R[0],ne?k:k[0])}},hn=t.useState(null),Re=ie(hn,2),rn=Re[0],we=Re[1],bn=t.useState(0),un=ie(bn,2),ln=un[0],Sn=un[1],cn=oe!==void 0?oe:o!=="combobox",sn=t.useCallback(function(f,S){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=p.source,k=R===void 0?"keyboard":R;Sn(S),u&&o==="combobox"&&f!==null&&k==="keyboard"&&we(String(f))},[u,o]),Ye=function(S,p,R){var k=function(){var an,De=Be(S);return[A?{label:De==null?void 0:De[te.label],value:S,key:(an=De==null?void 0:De.key)!==null&&an!==void 0?an:S}:S,Dn(De)]};if(p&&l){var W=k(),ke=ie(W,2),_e=ke[0],Ue=ke[1];l(_e,Ue)}else if(!p&&E&&R!=="clear"){var de=k(),He=ie(de,2),on=He[0],wn=He[1];E(on,wn)}},nn=$n(function(f,S){var p,R=ne?S.selected:!0;R?p=ne?[].concat(Ie(se),[f]):[f]:p=se.filter(function(k){return k.value!==f}),Ee(p),Ye(f,R),o==="combobox"?we(""):(!xn||O)&&(d(""),we(""))}),tn=function(S,p){Ee(S);var R=p.type,k=p.values;(R==="remove"||R==="clear")&&k.forEach(function(W){Ye(W.value,!1,R)})},ue=function(S,p){if(d(S),we(null),p.source==="submit"){var R=(S||"").trim();if(R){var k=Array.from(new Set([].concat(Ie(pe),[R])));Ee(k),Ye(R,!0),d("")}return}p.source!=="blur"&&(o==="combobox"&&Ee(S),s==null||s(S))},fn=function(S){var p=S;o!=="tags"&&(p=S.map(function(k){var W=h.get(k);return W==null?void 0:W.value}).filter(function(k){return k!==void 0}));var R=Array.from(new Set([].concat(Ie(pe),Ie(p))));Ee(R),R.forEach(function(k){Ye(k,!0)})},Qe=t.useMemo(function(){var f=j!==!1&&y!==!1;return q(q({},x),{},{flattenOptions:Ve,onActiveValue:sn,defaultActiveFirstOption:cn,onSelect:nn,menuItemSelectedIcon:ae,rawValues:pe,fieldNames:te,virtual:f,direction:B,listHeight:H,listItemHeight:G,childrenAsData:me,maxCount:xe,optionRender:ee})},[xe,x,Ve,sn,cn,nn,ae,pe,te,j,y,B,H,G,me,ee]);return t.createElement(Mn.Provider,{value:Qe},t.createElement(Xt,$e({},Ce,{id:Me,prefixCls:i,ref:e,omitDomProps:so,mode:o,displayValues:ge,onDisplayValuesChange:tn,direction:B,searchValue:C,onSearch:ue,autoClearSearchValue:O,onSearchSplit:fn,dropdownMatchSelectWidth:y,OptionList:Zt,emptyOptions:!Ve.length,activeValue:rn,activeDescendantId:"".concat(Me,"_list_").concat(ln)})))}),Jn=vo;Jn.Option=Yn;Jn.OptGroup=Gn;export{Yn as O,Jn as T,Gn as a};
